/*
 * SimpleUdpSourceApp.cc
 *
 *  Created on: Apr 22, 2025
 *      Author: root
 */


#include "inet/applications/udpapp/SimpleUdpSourceApp.h"

#include "inet/common/ModuleAccess.h"
#include "inet/common/packet/Packet.h"
#include "inet/networklayer/common/L3AddressResolver.h"
#include "inet/transportlayer/contract/udp/UdpControlInfo_m.h"

#define MSGKIND_SEND_TA                 9
namespace inet {

using namespace std;
//Define_Module(SimpleUdpSourceApp);

SimpleUdpSourceApp::~SimpleUdpSourceApp()
{

}


void SimpleUdpSourceApp::initialize(int stage)
{
    ApplicationBase::initialize(stage);

    cMessage *event = new cMessage("TA msg");
    event->setKind(MSGKIND_SEND_TA);
    double start=this->par( "initialProductionOffset" );
    scheduleAt(start, event);
}


void SimpleUdpSourceApp::handleMessageWhenUp(cMessage *msg)
{
    if (msg->isSelfMessage()) {
        if (msg->getKind()== MSGKIND_SEND_TA){
                sendTAMessage();
                std::cout <<  this->getFullPath() << simTime() << "TA generation triggered" << endl;
                delete msg;

        }
    }
}

} // namespace inet





